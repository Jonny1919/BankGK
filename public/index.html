fetch("/.netlify/functions/get-cloudinary-images")
  .then(res => res.json())
  .then(data => {
    const gallery = document.getElementById("gallery");
    gallery.innerHTML = "";

    if (data.resources && Array.isArray(data.resources)) {
      data.resources.forEach(img => {
        const image = document.createElement("img");
        image.src = img.secure_url;
        gallery.appendChild(image);
      });
    } else if (data.error) {
      gallery.innerText = "Fehler vom Server: " + data.error;
    } else {
      gallery.innerText = "Unerwartete Antwort vom Server.";
    }
  })
  .catch(err => {
    document.getElementById("gallery").innerText =
      "Fehler beim Laden: " + err.message;
  });
